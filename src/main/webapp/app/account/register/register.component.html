<div class="auth-container">
  <!-- Ruban Development -->
  <div class="development-ribbon">
    <span>Development</span>
  </div>

  <div class="auth-box">
    <!-- Logo et Titre -->
    <h1 class="app-title">DAUPHINEPLANNER</h1>

    <div class="form-container">
      <h2 class="auth-title">Create account</h2>

      <form name="form" role="form" (ngSubmit)="register()" [formGroup]="registerForm" *ngIf="!success()">
        <!-- Messages d'erreur -->
        <div class="alert alert-danger" *ngIf="error()">
          <span>Registration failed!</span>
        </div>

        <div class="alert alert-danger" *ngIf="errorUserExists()">
          <span>Login name already registered!</span>
        </div>

        <div class="alert alert-danger" *ngIf="errorEmailExists()">
          <span>Email is already in use!</span>
        </div>

        <div class="alert alert-danger" *ngIf="doNotMatch()">
          <span>The password and its confirmation do not match!</span>
        </div>

        <!-- Username -->
        <div class="form-group">
          <label class="form-label" for="login">Username</label>
          <input
            type="text"
            class="form-control"
            id="login"
            name="login"
            placeholder="Your username"
            formControlName="login"
            #login
            data-cy="username"
            [ngClass]="{ 'is-invalid': registerForm.get('login')?.invalid && registerForm.get('login')?.touched }"
          />
          <div class="invalid-feedback" *ngIf="registerForm.get('login')?.errors?.required">Your username is required.</div>
          <div class="invalid-feedback" *ngIf="registerForm.get('login')?.errors?.minlength">
            Your username is required to be at least 1 character.
          </div>
          <div class="invalid-feedback" *ngIf="registerForm.get('login')?.errors?.maxlength">
            Your username cannot be longer than 50 characters.
          </div>
          <div class="invalid-feedback" *ngIf="registerForm.get('login')?.errors?.pattern">Your username is invalid.</div>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label class="form-label" for="email">Email</label>
          <input
            type="email"
            class="form-control"
            id="email"
            name="email"
            placeholder="Your email"
            formControlName="email"
            data-cy="email"
            [ngClass]="{ 'is-invalid': registerForm.get('email')?.invalid && registerForm.get('email')?.touched }"
          />
          <div class="invalid-feedback" *ngIf="registerForm.get('email')?.errors?.required">Your email is required.</div>
          <div class="invalid-feedback" *ngIf="registerForm.get('email')?.errors?.invalid">Your email is invalid.</div>
          <div class="invalid-feedback" *ngIf="registerForm.get('email')?.errors?.minlength">
            Your email is required to be at least 5 characters.
          </div>
          <div class="invalid-feedback" *ngIf="registerForm.get('email')?.errors?.maxlength">
            Your email cannot be longer than 50 characters.
          </div>
        </div>

        <!-- Password -->
        <div class="form-group">
          <label class="form-label" for="password">New password</label>
          <input
            type="password"
            class="form-control"
            id="password"
            name="password"
            placeholder="New password"
            formControlName="password"
            data-cy="firstPassword"
            [ngClass]="{ 'is-invalid': registerForm.get('password')?.invalid && registerForm.get('password')?.touched }"
          />
          <div class="invalid-feedback" *ngIf="registerForm.get('password')?.errors?.required">Your password is required.</div>
          <div class="invalid-feedback" *ngIf="registerForm.get('password')?.errors?.minlength">
            Your password is required to be at least 4 characters.
          </div>
          <div class="invalid-feedback" *ngIf="registerForm.get('password')?.errors?.maxlength">
            Your password cannot be longer than 50 characters.
          </div>
        </div>

        <jhi-password-strength-bar [passwordToCheck]="registerForm.get('password')!.value"></jhi-password-strength-bar>

        <!-- Confirm Password -->
        <div class="form-group">
          <label class="form-label" for="confirmPassword">New password confirmation</label>
          <input
            type="password"
            class="form-control"
            id="confirmPassword"
            name="confirmPassword"
            placeholder="Confirm the new password"
            formControlName="confirmPassword"
            data-cy="secondPassword"
            [ngClass]="{ 'is-invalid': registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched }"
          />
          <div class="invalid-feedback" *ngIf="registerForm.get('confirmPassword')?.errors?.required">
            Your confirmation password is required.
          </div>
          <div class="invalid-feedback" *ngIf="registerForm.get('confirmPassword')?.errors?.minlength">
            Your confirmation password is required to be at least 4 characters.
          </div>
          <div class="invalid-feedback" *ngIf="registerForm.get('confirmPassword')?.errors?.maxlength">
            Your confirmation password cannot be longer than 50 characters.
          </div>
        </div>

        <!-- Submit Button -->
        <div class="auth-buttons">
          <button type="submit" class="btn btn-primary" [disabled]="registerForm.invalid" data-cy="submit">Register</button>
        </div>

        <!-- Login Link -->
        <div class="additional-links">
          <div class="login-link">
            <span>Already have an account?</span>
            <a class="alert-link" routerLink="/login">Sign in</a>
          </div>
        </div>
      </form>

      <!-- Success Message -->
      <div class="alert alert-success" *ngIf="success()">
        <span>Registration saved! Please check your email for confirmation.</span>
      </div>
    </div>
  </div>
</div>
